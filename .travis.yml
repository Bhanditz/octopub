language: ruby
cache: bundler
sudo: false
rvm:
- 2.1.2
bundler_args: "--without development --path=~/.bundle"
before_script:
- bundle exec rake db:create db:migrate
addons:
  postgresql: '9.3'
notifications:
  irc:
    channels:
    - irc.freenode.net#theodi
    template:
    - "%{repository} %{branch} - %{message} %{build_url}"
    on_success: change
    on_failure: always
deploy:
  provider: heroku
  api_key:
    secure: YJnNMUmk/xpwehdo8uc3zaBwOY3LpmF1arjXQUIWE5cJ8a0XQ6CiyvccMKGIufKvqiyS5LX1ObQxbROZNyM2GLn5NB/Q6tBpGH8MuvVUVRELb1SUyirBLRjH6ojD7ObeEOkVs64FEXq/zYjOfi8/q+MOyxacK2ltt6VK8s0Nev4=
  run:
    - "rake db:migrate"
  app: git-data-publisher
  on:
    repo: theodi/git-data-publisher
