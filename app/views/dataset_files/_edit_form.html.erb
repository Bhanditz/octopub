<% if false %>
<!-- OLD STUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUFF -->
<fieldset class="file bg-upload">
  <!-- <div class="well bg-info"> -->
    <%= f.text_field "files[][title]", label: "File title", class: "title", value: file.title, placeholder: t(:'dataset_file.name'), readonly: !file.id.nil? %>
    <%= f.text_area "files[][description]", label: "File description", class: "description", value: file.description, placeholder: t(:'dataset_file.description') %>
    <% if file.dataset_file_schema %>
      <div class="alert alert-warning" role="alert"><b>Warning</b> This file has been validated against the schema <%= link_to file.dataset_file_schema.name, dataset_file_schema_path(file.dataset_file_schema) %> and if you change the file, it will also be validated against that schema.</div>
    <% end %>

    <%= f.select "files[][dataset_file_schema_id]", options_from_collection_for_select(dataset_file_schemas, :id, :name,  selected_dataset_file_schema_id(file, @default_schema).to_s), { prompt: 'No schema required', label: 'File schema'}, {'data-live-search': "true", class: 'selectpicker'} %>

    <% if file.filename %>
      <div class="form-group filename-wrapper">
        <div class="current-file">
          <label class="control-label">
            Current file
          </label>
          <p><%= link_to file.filename, file.gh_pages_url %> <%= f.check_box "Change file #{i}", label: "Change file", class: "change-file" %> </p>
        </div>
      </div>
    <% else %>
      <%= f.file_field "files[][file]", label: "File", accept: ".csv" %>
    <% end %>
    <%= f.hidden_field("files[][id]", name: "files[][id]", value: file.id) if file.id %>
  <!-- </div> -->
</fieldset>
<!-- OLD STUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUFF -->
<% end %>

<div class="file-input-group well well-lg">
  <fieldset class="file bg-upload">
    <div class="form-group">
      <label for="files[][title]">File title</label>
      <%= text_field_tag "files[][title]", file.title, placeholder: t(:'dataset_file.name'), readonly: !file.id.nil?, class: "title form-control" %>
    </div>
    <div class="form-group">
      <label for="files[][description]">File description</label>
      <%= text_area_tag "files[][description]", file.description, placeholder: t(:'dataset_file.description'), class: "description form-control" %>
    </div>

    <% if file.filename %>
      <div class="form-group filename-wrapper">
        <div class="current-file">
          <label class="control-label">Change file</label>
          <p><%= link_to file.filename, file.gh_pages_url %> <%= check_box "Change file #{i}", class: "change-file form-control" %> </p>
        </div>
      </div>
    <% else %>
      <div class="form-group">
        <label for="[files[][file]]">File upload</label>
        <%= file_field_tag "[files[][file]]", accept: ".csv" %>
      </div>
    <% end %>

    <%= hidden_field("files[][id]", name: "files[][id]", value: file.id) if file.id %>
  </fieldset>
  <fieldset class="file bg-upload">
    <% if @dataset_file_schemas.any? %>
      <div class="form-group">
        <label for="[files[][dataset_file_schema_id]]">File schema</label>
        <%= select_tag "[files[][dataset_file_schema_id]]", options_from_collection_for_select(@dataset_file_schemas, :id, :name, selected_dataset_file_schema_id(file, @default_schema).to_s), { prompt: 'No schema required', label: 'Apply a schema to your file (optional)', disabled: !@dataset.published_status, class: "form-control" } %>
      </div>
    <% end %>
  </fieldset>
</div>