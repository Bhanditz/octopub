<div class="file-input-group">
  <fieldset class="file bg-upload">
    <div class="form-group">
      <label for="files[][title]">File title<i class="fa fa-question-circle pull-right" data-toggle="tooltip" data-placement="right" title="Tooltip on right"></i></label>
      <%= text_field_tag "files[][title]", file.title, placeholder: t(:'dataset_file.name'), readonly: !file.id.nil?, class: "title form-control" %>
    </div>
    <div class="form-group">
      <label for="files[][description]">File description<i class="fa fa-question-circle pull-right" data-toggle="tooltip" data-placement="right" title="Tooltip on right"></i></label>
      <%= text_area_tag "files[][description]", file.description, placeholder: t(:'dataset_file.description'), class: "description form-control" %>
    </div>

    <% if file.filename %>
      <div class="form-group filename-wrapper">
        <div class="current-file">
          <label class="control-label">Current file</label>
          <p><%= link_to file.filename, file.gh_pages_url %> <%= check_box "Change file #{i}", label: "Change file", class: "change-file form-control" %> </p>
        </div>
      </div>
    <% else %>
      <div class="form-group">
        <label for="[files[][file]]">File upload<i class="fa fa-question-circle pull-right" data-toggle="tooltip" data-placement="right" title="Tooltip on right"></i></label>
        <%= file_field_tag "[files[][file]]", accept: ".csv" %>
      </div>
    <% end %>

    <%= hidden_field("files[][id]", name: "files[][id]", value: file.id) if file.id %>
  </fieldset>
  <fieldset class="file bg-upload">

    <% if dataset_file_schemas.any? %>
      <div class="form-group">
        <label for="[files[][dataset_file_schema_id]]">Apply a schema to your file (optional)<i class="fa fa-question-circle pull-right" data-toggle="tooltip" data-placement="right" title="Tooltip on right"></i></label>
        <%= select_tag "[files[][dataset_file_schema_id]]", options_from_collection_for_select(dataset_file_schemas, :id, :name), { prompt: 'No schema required', label: 'Apply a schema to your file (optional)', class: "form-control" } %>
      </div>
    <% end %>

    <% if false %>
      <h4>Upload a schema for this Data File</h4>
      <p>Provide an optional <a href='https://csvlint.io/about#how_write_schema\'>schema</a> that all data files must adhere to</p>

      <%= text_field "files[][schema_name]", label: "Schema name", value: schema.name, placeholder: t(:'dataset.schema.name') %>
      <%= text_area "files[][schema_description]", label: "Schema description", value: schema.description, placeholder: t(:'dataset.schema.description') %>
      <div><%= file_field "files[][schema]", label: "File", accept: ".json" %></div>
      <%= select "files[][schema_restricted]", dataset_file_schema_access_options, { label: "Access" }, { class: "selectpicker form-control show-tick" } %>
    <% end %>

  </fieldset>
</div>